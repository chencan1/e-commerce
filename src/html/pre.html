<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="../less/reset.css">
    <link rel="stylesheet" href="../less/header.css">
    <link rel="stylesheet" href="../less/pre.css">
    <script src="../../node_modules/jquery/dist/jquery.min.js"></script>
    <script src="../js/cookie.js"></script>
    <script src="../js/headerbanner.js"></script>
    <script src="../js/pre.js"></script>
    <title>Document</title>
    <script>
        $(function() {
            var usename = cookie.get("username");
            var f = cookie.get("isLogin");
            if (f) {
                $('#deng').html("欢迎您：" + usename);
                $('#deng').attr('href', "javascript:;")
                var e = ` <a href="index.html" id="tui">退出</a>`
                $('#deng1').html(function(i, old) {
                    return old + e;
                })
            }
            $('#deng1').on('click', '#tui', function() {
                cookie.remove('isLogin');
                $('#deng').attr('href', "login.html")
            })
            var shop2 = [];
            $('#main .text h3').on('click', function() {
                if (f) {
                    var se = location.search.split('=');
                    var id = se[1].split('&')[0];
                    var name = se[2];
                    addShopCar(id, name, $('#main .text input').val())

                } else {
                    alert('请登录');
                }
            })

            function addShopCar(id, name, num) {
                var shop = cookie.get('shop'); //从cookie获取shop
                var product = {
                    "id": id,
                    "name": name,
                    "num": num
                };

                if (shop) {
                    shop = JSON.parse(shop); // cookie中如果有数据 这个数据是json字符串 转成对象

                    if (shop.some(elm => elm.id == id)) {
                        shop.forEach(function(elm, i) {
                            elm.id == id ? elm.num = num : null;
                        });
                    } else {
                        shop.push(product);
                    }
                    cookie.set('shop', JSON.stringify(shop), 1);
                } else {
                    shop = [];
                    shop.push(product);
                    cookie.set('shop', JSON.stringify(shop), 1);
                }

            }
        })
    </script>
</head>

<body>
    <div id="header">
        <div class="header-left">
            <ul>
                <li>
                    <a href="">TCL新闻</a>
                </li>
                <li>
                    <a href="">企业采购</a>
                </li>
                <li>
                    <a href="">经销商之家</a>
                </li>
                <li>
                    <a href="">用户体验中心</a>
                </li>
                <li>
                    <a href="">铁粉社区</a>
                </li>
                <li>
                    <a href="">人才招聘</a>
                </li>
            </ul>
        </div>
        <div class="header-right">
            <ul>
                <li>
                    <a href="">微信商城</a>
                    <div class="tencent">
                        <img src="../img/wechat.jpg" alt="">
                        <p>
                            "关注公众号"
                            <br> "一键下单购买"
                        </p>
                    </div>
                </li>
                <i></i>
                <li>
                    <a href="guo.html">购物车</a>
                    <span>(0)</span>
                </li>
                <i></i>
                <li>
                    <a href="">注册</a>
                </li>
                <i></i>
                <li id="deng1">
                    <a href="login.html" id="deng">登录</a>
                </li>
            </ul>
        </div>
    </div>
    <div id="header1">
        <div class="logo">
            <a href="#">TCT</a>
        </div>
        <div class="text">
            <div class="shou">
                <a href="">首页</a>
            </div>
            <ul>
                <li>
                    <a href="">电视</a>
                </li>
                <li>
                    <a href="">空调</a>
                </li>
                <li>
                    <a href="">冰箱</a>
                </li>
                <li>
                    <a href="">洗衣机</a>
                </li>
                <li>
                    <a href="">健康电器</a>
                </li>
                <li>
                    <a href="">智能硬件</a>
                </li>
                <div class="erbar">
                    <ul>
                    </ul>
                </div>
            </ul>
        </div>
        <div class="text1">
            <font class="font"></font>
            <ul>
                <li>
                    <a href="">服务</a>
                </li>
                <li>
                    <a href="">视频教程</a>
                </li>
                <li>
                    <a href="">XESS门店</a>
                </li>
                <li>
                    <a href="">积分兑换</a>
                </li>
            </ul>
            <span class="menu">
                 <input type="text" id="shou" placeholder="领券立减100元">
                <span>
                   <img src="../img/top_01.jpg" alt="">
                </span>
            </span>
        </div>
    </div>
    <div id="main">
        <div class="img">
            <div class="small">
                <img src="" class="smallpic">
                <div class="movebox"></div>
            </div>
            <div class="big">
                <img src="" class="bigpic">
            </div>
        </div>
        <div class="text">
            <h1></h1>
            <p>【618开门红，全网保价！】
                <br> 买65Q2立享3重好礼：1、领券立减100元，再返100元安装补贴，到手价5299元；2、晒单送价值397元无线话筒；3、全网保价618，买贵补差
            </p>
            <h2>可获取积分：400</h2>
            <h6></h6>
            <span class="span2">促销价：</span>
            <span class="span1"></span>
            <ul>
                <li>满6500减200</li>
                <li>满3500减100</li>
                <li>满2500减50</li>
            </ul>
            <input type="number" value="1" min="1" max="100">
            <h3>
                加入购物车
            </h3>
        </div>
    </div>
</body>

</html>